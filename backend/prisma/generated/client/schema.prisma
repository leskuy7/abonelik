generator client {
  provider = "prisma-client-js"
  output   = "./generated/client"
}

datasource db {
  provider = "mysql"
}

model User {
  id            Int            @id @default(autoincrement())
  email         String         @unique
  password      String
  name          String?
  createdAt     DateTime       @default(now())
  subscriptions Subscription[]
}

model Subscription {
  id              Int       @id @default(autoincrement())
  userId          Int
  user            User      @relation(fields: [userId], references: [id])
  name            String
  price           Float
  currency        String    @default("TRY")
  billingCycle    String // MONTHLY, YEARLY
  startDate       DateTime
  nextPaymentDate DateTime
  status          String    @default("ACTIVE") // ACTIVE, CANCELLED
  invoices        Invoice[]
}

model Invoice {
  id             Int          @id @default(autoincrement())
  subscriptionId Int
  subscription   Subscription @relation(fields: [subscriptionId], references: [id])
  amount         Float
  dueDate        DateTime
  status         String       @default("PENDING") // PAID, PENDING, OVERDUE
  paidAt         DateTime?
}
